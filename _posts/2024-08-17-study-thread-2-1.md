---
title: 1 프로세스와 스레드
date: 2024-08-17 16:37:00 +0900
categories: [Study, Java-advanced1]
tags: [study, java, thread, adv1]
pin: true
---

> 아무리 스레드에 대해 알아보고 공부하려 해도 끝이 없는 것 같다. 
> 저번 강의는 내용이 딥하고 어려운 감이 있어 유명한 김영한 님의 강의를 먼저 수강한 뒤 이어서 들어보려고 한다.  
> 공부할 건 많은데.. 세상엔 재밌는게 너무 많다 ㅇㅠㅇ

## 스터디 git 주소
<hr />

- https://github.com/chj-dev/java-adv1

## 멀티태스킹과 멀티프로세싱
<hr />

### 컴퓨터 하나에 한 가지 프로그램만 실행할 수 있다면?
- 우리는 당연하듯 컴퓨터 하나에 여러가지 프로그램을 켜놓고 생활한다. 
문서 작업을 하면서 음악을 들을 수도 있고, 게임을 하면서 유튜브 영상을 같이 볼 수도 있고...
그런데 한 가지 프로그램 수행을 끝내야 다음 프로그램을 실행할 수 있다면? 문서 작업이 끝난 뒤에야 음악을 들을 수 있다면?
... 하지만 예전에는 정말 한 번에 하나의 프로그램만 실행 가능했다고 한다.
- 이를 해결하기 위해 나온 것이 '멀티태스킹' 이다.

1. 멀티태스킹 (Multi-tasking)
: **하나의 CPU 코어**로 여러 프로그램을 동시에 실행하는 기술
: **시분할 기법(Time Sharing)**: 각 프로그램의 실행 시간을 분할해서 동시에 실행되는 것 처럼 하는 기법

> 이때 어떤 프로그램이 얼마만큼 실행될지는 운영체제가 결정하는데, 이를 스케줄링(Scheduling) 이라고 한다.
> 시간 말고도, 우선 순위, 최적화 기법 등을 사용하여 결정한다.
{: .prompt-info }

### CPU 코어가 둘 이상이라면?

1. 멀티프로세싱 (Multi-processing)
: **둘 이상의 프로세서(CPU 코어)** 를 사용하여 여러 프로그램을 동시에 처리하는 기술
: 멀티태스킹보다 동시에 더 많은 작업을 처리할 수 있다.

### 멀티프로세싱 vs 멀티태스킹
- 멀티프로세싱: 하드웨어 장비의 관점
- 멀티태스킹: 운영체제 소프트웨어의 관점


## 프로세스와 스레드
<hr />

### 프로세스 (Process)
- 운영체제 내에서 실행중인 프로그램
- 프로세스는 하나 이상의 스레드가 반드시 존재한다.

- 프로세스의 메모리 구성
: **코드 섹션**: 실행할 프로그램의 코드가 저장됨
: **데이터 섹션**: 전역 변수 및 정적 변수가 저장됨
: **힙**: 동적으로 할당되는 메모리 영역
: **스택**: 메서드 호출 시 생성되는 지역 변수와 반환 주소가 저장되는 영역

### 스레드 (Thread)
- 프로세스 내에서 실행되는 작업의 단위
- 스택을 제외하고 프로세스의 메모리 공간을 공유한다.
- 운영체제의 스케줄러에 의해 실행된다.

- 스레드의 메모리 구성
: **공유 메모리**: 프로세스의 코드 섹션, 데이터 섹션, 힙 공유
: **스택**: 각 스레드마다 자신의 스택을 가짐

1. 단일 스레드
: 하나의 프로그램 안에서 하나의 작업만 하는 것

2. 멀티 스레드
: 하나의 프로그램 안에서 여러 작업을 하는 것
: ex. 워드 파일을 수정하는데 자동으로 저장이 되고, 맞춤법 검사도 자동으로 되는 것.

## 컨텍스트 스위칭 (Context Switching)
<hr />

- 만약 사람이 2개의 작업을 할 때, A작업을 하다가 끊고, B작업을 수행 후 다시 A작업을 해야 한다면 어떻게 될까?
- B작업을 해야 할 때도 어디까지 작업이 되었는지 히스토리 파악이 필요하고, 다시 A작업으로 돌아올 때도 기억을 되짚는 과정이 필요하다.
- 이는 컴퓨터도 마찬가지다. 
- 스레드A 작업을 하다 끊는 시점에 관련 값들을 메모리에 저장해 놔야 하고, 다시 작업을 시작할 때 불러와야 한다.
- 컨텍스트: 현재 작업하는 문맥, 스위칭: 변함

## CPU 바운드 vs I/O 바운드
<hr />

1. CPU 바운드 작업
: CPU 연산 능력을 많이 요구하는 작업
: ex. 알파고 등

2. I/O 바운드 작업
: 디스크, 네트워크, 파일 시스템 등과 같은 입출력 작업을 많이 요구하는 작업
: I/O 작업이 완료될 때까지 CPU 는 상대적으로 유휴상태가 된다.
: ex. DB 쿼리 처리, 파일 읽기/쓰기, 네트워크 통신 등

- 스레드의 숫자는 CPU 바운드 작업이 많은지, I/O 작업이 많은지에 따라 다르게 설정해야 한다.

## 참고자료
<hr />

[김영한의 실전 자바 - 고급 1편](https://www.inflearn.com/course/%EA%B9%80%EC%98%81%ED%95%9C%EC%9D%98-%EC%8B%A4%EC%A0%84-%EC%9E%90%EB%B0%94-%EA%B3%A0%EA%B8%89-1/dashboard)
